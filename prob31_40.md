### ğŸ’¯ prob31 ~ prob40

31. í˜„ì¬ ì•± í¬í•¨í•´ì„œ ë‚´/ì™¸ë¶€ ì„œë¹„ìŠ¤ì— ëŒ€í•´ ì¼ë ¨ì˜ ê±°ë²„ë„ŒìŠ¤ ì •ì±…ì„ ì ìš©í•˜ëŠ” ì•±ì„ ê°œë°œ, PolicyApp ë‹·ë„· ì½”ì–´ ì›¹ ì•±ì„ ê°œë°œí•˜ê³  Azure app service ì›¹ì•±ì— ë°°í¬í•©ë‹ˆë‹¤. í•´ë‹¹ ì•±ì€ ë‹¤ìŒ ì´ë²¤íŠ¸ì— ë°˜ì‘í•˜ë©° azure event gridì—ì„œ í• ì¼?
  - ë¡œê·¸ì¸ ë° ë¡œê·¸ì•„ì›ƒì‹œ ì‚¬ìš©ìë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê¸° ìœ„í•´ ì¸ì¦ ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©
  - ëª¨ë“  ì¸ì¦ ì´ë²¤íŠ¸ëŠ” policyAppì—ì„œ ì²˜ë¦¬í•´ì•¼í•¨.
  - ë¡œê·¸ì•„ì›ƒì€ ìµœëŒ€í•œ ë¹¨ë¦¬ ì²˜ë¦¬ë˜ì–´ì•¼ í•¨.
  > ğŸ”– better to know  
  > Azure Event Grid ?   
  > ì´ë²¤íŠ¸ ê·¸ë¦¬ë“œëŠ” ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•±ì„ í†µí•©í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í™•ì¥ì„±ì´ ë›°ì–´ë‚œ ì„œë²„ë¦¬ìŠ¤ ì´ë²¤íŠ¸ ë¸Œë¡œì»¤. ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ ì†”ë£¨ì…˜ ë§Œë“œëŠ” ë° íƒì›”.  
  > ![eventGrid](./image/eventGrid.png)  

  > :heavy_exclamation_mark: ê°œë…   
  ì´ë²¤íŠ¸ - ë°œìƒí•œ ë‚´ìš©ì…ë‹ˆë‹¤.  
  ì´ë²¤íŠ¸ ì›ë³¸ - ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ê³³ì…ë‹ˆë‹¤.  
  í† í”½ - ê²Œì‹œìê°€ ì´ë²¤íŠ¸ë¥¼ ë³´ë‚¸ ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.  
  ì´ë²¤íŠ¸ êµ¬ë… - ë•Œë•Œë¡œ ì—¬ëŸ¬ ì²˜ë¦¬ê¸°ì— ì´ë²¤íŠ¸ë¥¼ ë¼ìš°íŒ…í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ ë˜ëŠ” ê¸°ë³¸ ì œê³µ ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤. êµ¬ë…ë„ ì²˜ë¦¬ê¸°ê°€ ì§€ëŠ¥ì ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ì´ë²¤íŠ¸ë¥¼ í•„í„°ë§í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.  
  ì´ë²¤íŠ¸ ì²˜ë¦¬ê¸° - ì´ë²¤íŠ¸ì— ë°˜ì‘í•˜ëŠ” ì•± ë˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.  
  
  - ğŸ”” **Add a subject prefix to sign-out events. Create an Azure Event Grid subscription. Configure the subscription to use the subjectBeginsWith filter.**

  32. process.exeë¼ëŠ” ë„¤ì´í‹°ë¸Œ ì•±ì„ ì»´íŒŒì¼í•œ C++ ì•±ì„ ë§Œë“œëŠ”ë° ì´ë¯¸ì§€ ì…ë ¥í•˜ë©´ GIF, PNG ë˜ëŠ” JPEG ì´ë¯¸ì§€ í˜•ì‹ ì¤‘ í•˜ë‚˜ë¡œ ì´ë¯¸ì§€ë¥¼ ë¦¬í„´í•¨. ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Azure Functionë¡œ ë°°í¬.
  > ğŸ”” 
  function.json {
    **type: http,**
    direction: out,
    name: result
  }  
 **"customHandler": {**
  "description": {
     "defaultExecutablePath": "handler.exe",   
     **"enableForwardingHttpRequest": true**
  }  
  ì¶”ê°€ ë°”ì¸ë”© ë˜ëŠ” ì¶œë ¥ì´ ì—†ëŠ” HTTP íŠ¸ë¦¬ê±° í•¨ìˆ˜ì˜ ê²½ìš°(bindingsë‚˜ Outputsì„¤ì •ì´ ë”°ë¡œ ì—†ì„ ë–„) ì²˜ë¦¬ê¸°ê°€ HTTP ìš”ì²­ ë° ì‘ë‹µìœ¼ë¡œ ì§ì ‘ ì‘ë™í•˜ë„ë¡ í•˜ëŠ” ì˜µì…˜

  33. azure static web app ìš´ì˜ ì¤‘ AAD ì´ìš©í•´ì„œ ì¸ì¦í•´ì•¼í•¨. 
  > ğŸ””  400: ì˜ëª»ëœ ìš”ì²­, 403: ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ  
  "routes": [  
    {  //ì „ì²´ ê²½ë¡œì— ëŒ€í•´ ì¸ì¦ìš”êµ¬
      "route": "/*",
      "allowedRoles": ["authenticated"]  
    }  
  ],  
  "responseOverrides": {  
    "401": {  // ì¸ì¦ë˜ì§€ ì•ŠëŠ” ìƒíƒœì—ì„œ ì œí•œëœ í˜ì´ì§€ ìš”ì²­í•  ê²½ìš°
      "statusCode": 302,  //ë¦¬ë””ë ‰ì…˜ì€ 301, 302 ì¤‘ í•˜ë‚˜.
      "redirect": "/.auth/login/aad"  //ë¦¬ë‹¤ì´ë ‰íŠ¸
    }   
  }    
}   
34. Azure resource template ì‘ì„±, main tempalteì´ linkTempalte1,2ë¥¼ ê°–ê³ ìˆìŒ. Azure CLI?
> ğŸ”” az ts create --template-file mainTemplate.json  
ts : template spec

35. Azure function app ë§Œë“œëŠ”ë°, ìœ ì €ê°€ azure web pubsubì´ìš©í•œ ë¸Œë¼ìš°ì €ì—ì„œ ìƒˆ ì´ë²¤íŠ¸ë¥¼ ë¦¬í¬íŠ¸ í•  ìˆ˜ ìˆìŒ.
  > ğŸ”– better to know 
  azure web pubsub ?  ì‹¤ì‹œê°„ ê²Œì‹œ-êµ¬ë… ë©”ì‹œì§•ì´ í•„ìš”í•œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ì‚¬ìš©.
  Azure Funtionì—ì„œ binding ? í•¨ìˆ˜ë¥¼ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì— ì—°ê²°
  Azure Funtionì—ì„œ Trigger ? í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë„ë¡ í•˜ëŠ” ê²ƒ 
- ğŸ”” bindings type ? WebPubSubTrigger, eventType ? user (systemë„ ìˆìŒ.)

36. VMì—ì„œ ëŒì•„ê°€ëŠ” Saas ì†”ë£¨ì…˜ì„. ë°ì´í„°ëŠ” VMì— ë¶™ì¸ ê´€ë¦¬ ë””ìŠ¤í¬ì— ì €ì¥ë¨. ë¶„ì„ ì„±ëŠ¥ì€ ì´ ë””ìŠ¤í¬ ì„±ëŠ¥ì— ë‹¤ë¼ ê²°ì •ë¨. 
  - ë°ì´í„° ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ë¹¨ë¦¬ ì–´ì œê»„ë¡œ ë¦¬ë²„íŠ¸ ì‹œì¼œì•¼í•¨.
  - ì• ì € ë°ì´íƒ€ì„¼í„° ì •ì „ì‹œ ë‹¤ìš´ íƒ€ì„ì´ ìµœì†Œì—¬ì•¼í•¨.  
ì„ ë§Œì¡±í•˜ëŠ” ê´€ë¦¬ ë””ìŠ¤í¬ ìŠ¤í™?
> ğŸ”” DiskType? Preminum SSD(í”„ë¦¬ë¯¸ì—„ë§Œ backupì„ ì„œí¬íŠ¸í•¨. v2ëŠ” ë˜ ì•ˆí•¨ì— ìœ ì˜), Redundancy? ZRS(ê´€ë¦¬ë””ìŠ¤í¬ëŠ” GRS ì§€ì›ì•ˆí•¨.)

37. ë„ì»¤ ì»¨í…Œì´ë„ˆ 2ê°œ í¬í•¨í•œ ì•± ê°œë°œ, ë‹¤ìŒ ì¡°ê±´ ë§Œì¡±í•˜ëŠ”ê²ƒ ?  
- The containers must not run as root.  **-> azure file X**
- The containers must be deployed to Azure Container Instances by using a YAML file.  
- The containers must share a lifecycle, resources, local network, and storage volume.  **--> container group**
- The storage volume must persist through container crashes.  
- The storage volume must be deployed on stop or restart of the containers.  **--> restartëì„ë•ŒëŠ” ë³¼ë¥¨ì˜ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ì§€ ì•ŠìŒ.(emptyDir)**
 > ğŸ”– better to know  
 container group? ê°™ì€ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ì—ì„œ ìŠ¤ì¼€ì¤„ë§ëœ ì»¨í…Œì´ë„ˆ ì»¬ë ‰ì…˜, ì–˜ë„¤ëŠ” ë¼ì´í”„ ì‚¬ì´í´, ë¦¬ì†ŒìŠ¤, ë¡œì»¬ë„¤íŠ¸ì›Œí¬, ìŠ¤í† ë¦¬ì§€ ë³¼ë¥¨ì„ ì‰ì–´í•œë‹¤.
 Storage volume? ê¸°ë³¸ì ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ëŠ” statelessì„. ì»¨í…Œì´ë„ˆ ìˆ˜ëª…ì´ ì§€ë‚œ í›„ì—ë„ ìƒíƒœë¥¼ ìœ ì§€í•˜ë ¤ë©´ ì™¸ë¶€ì €ì¥ì†Œì˜ ë³¼ë¥¨ì„ íƒ‘ì¬í•´ì•¼í•¨. (ë¸”ë£¨/ê·¸ë¦° ë“±)

 38. ì˜¨í”„ë ˆë¯¸ìŠ¤ SQL serverë¥¼ ì‚¬ìš©í•˜ëŠ” ì›¹ ì•±. ë°ì´í„° ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ webjob ì´ìš©í•¨. 4ëª…ì´ ì›¹ ì„œë¹„ìŠ¤ ì´ìš©í•¨. App service plan for Web app ?  
 - Each instance of the WebJob processes data for a single customer and must run as a singleton instance. **--> ê°ì ì¡´ì¬** 
 - Each deployment must be tested by using deployment slots prior to serving production data.
 - Azure costs must be minimized.
 - Azure resources must be located in an isolated network **--> ê²©ë¦¬ì§€ì›í•˜ëŠ” ê²ƒ**
> ğŸ”” Number of VM instance? 4, pricing tier? isolated

39. storage queueê°€ íŠ¸ë¦¬ê±°í•˜ëŠ” ì• ì € function. ì• ì € functionì„ ì¿ ë²„ë„¤í‹±ìŠ¤ë¡œ ë§ˆì´ê·¸í•˜ë ¤ê³  í•œë‹¤. k8s custom resource definitions ì„¤ì •?
> ğŸ”” Azure function Code ? deploymnent, Polling interval? ScaledObject, Azure storage connection string ? secret!

40. deployee code ì‘ì„±!  
> ğŸ”” step 1. ë¦¬ì†ŒìŠ¤ê·¸ë£¹ ìƒì„±    
step2. plan ë¨¼ì € ìƒì„± -> sku ì§€ì •    
step3. web app ìƒì„± with plan ì§€ì •  
step4. ë””í”Œë¡œì´ ì„¤ì • -> ì´ë•Œ git repo url ì§€ì • by -- options  